{% extends '_include/base-general.html' %}
{% block head %}
{% load static %}
<title>{{ APP_CONSTANT_APP_NAME }} : {{ title }}</title>
{% endblock %}
{% block body %}
{% load static %}{% csrf_token %}
<div id="page-head">
    <div id="page-title">
        <h1 class="page-header text-overflow">{{ title }}</h1>
    </div>
    <ul class="breadcrumb">
        <li><a href="{% url 'users_dashboard' %}">Home</a></li>
        <li><a href="{% url 'activities_view' pk=activity.activity_id %}">{{activity.activity_name }}</a></li>
        <li><a href="{% url 'activities_inputs_view' pk=model.activity_input_id %}">{{model.activity_input_class }}</a></li>
        
        <li class="active">Expenditure</li>
    </ul>
</div>
<div id="page-content" style="padding-top:0px;">
    <div class="row">
        <div class="col-sm-12">
            <div class="panel">
                <div class="panel-body">
                    <form id="activity_input_expenditure_form" method="post" action="{% url 'activities_inputs_expenditure' pk=model.activity_input_id %}">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.input_class.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.input_class.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.input_class }}
                                    {{ form.input_class.errors }}
                                </div>
                            </div>
                            <div id ="sub_inputs" class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.input_sub_class.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.input_sub_class.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.input_sub_class }}
                                    {{ form.input_sub_class.errors }}
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.scheme_class.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.scheme_class.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.scheme_class }}
                                    {{ form.scheme_class.errors }}
                                </div>
                            </div>
                            <div id ="sub_scheme" class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.scheme_sub_class.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.scheme_sub_class.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.scheme_sub_class }}
                                    {{ form.scheme_sub_class.errors }}
                                </div>
                            </div>
                            
                        </div>
                        <div class="row">
                            <div id="sub_programs" class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.funder.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.funder.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.funder }}
                                    {{ form.funder.errors }}
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.transfer_class.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.transfer_class.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.transfer_class }}
                                    {{ form.transfer_class.errors }}
                                </div>
                            </div>
                            <div id="sub_transfer_class" class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.sub_transfer_class.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.sub_transfer_class.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.sub_transfer_class }}
                                    {{ form.sub_transfer_class.errors }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.implementer.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.implementer.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.implementer }}
                                    {{ form.implementer.errors }}
                                </div>
                            </div>
                            <div  class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.division.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.sub_division.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.division }}
                                    {{ form.division.errors }}
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.budget.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.budget.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.budget }}
                                    {{ form.budget.errors }}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.budget_currency.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.budget_currency.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.budget_currency }}
                                    {{ form.budget_currency.errors }}
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.expenses.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.expenses.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.expenses }}
                                    {{ form.expenses.errors }}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>
                                        {{ form.expenses_currency.label }}
                                        <label style="color: red; margin-bottom: 0;">
                                            {% if form.expenses_currency.field.required %} * {% endif %}
                                        </label>
                                    </label>
                                    {{ form.expenses_currency }}
                                    {{ form.expenses_currency.errors }}
                                </div>
                            </div>
                        </div>
                        <br />
                            
                        <button type="submit" class="btn btn-lg btn-block btn-primary" onClick="javascript:onSubmit();"> Save</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $("#id_activity_input_expenses_currency").select2({ placeholder: "--select--", allowClear: true });

        // Submit the form
            var input_class = document.getElementById('id_activity_input_class');
            input_class.disabled = true;
            input_class.value = input_class.options[input_class.selectedIndex].value;

            var input_sub_class = document.getElementById('id_activity_input_sub_class');
            input_sub_class.disabled = true;
            input_sub_class.value = input_sub_class.options[input_sub_class.selectedIndex].value;

            var input_scheme = document.getElementById('id_activity_input_scheme');
            input_scheme.disabled = true;
            input_scheme.value = input_scheme.options[input_scheme.selectedIndex].value;

            var input_sub_scheme = document.getElementById('id_activity_input_sub_scheme');
            input_sub_scheme.disabled = true;
            input_sub_scheme.value = input_sub_scheme.options[input_sub_scheme.selectedIndex].value;

            var input_transfer_class = document.getElementById('id_activity_input_transfer_class');
            input_transfer_class.disabled = true;
            input_transfer_class.value = input_transfer_class.options[input_transfer_class.selectedIndex].value;

            var input_transfer_sub_class = document.getElementById('id_activity_input_transfer_sub_class');
            input_transfer_sub_class.disabled = true;
            input_transfer_sub_class.value = input_transfer_sub_class.options[input_transfer_sub_class.selectedIndex].value;

            var funder = document.getElementById('id_activity_input_funder');
            funder.disabled = true;
            funder.value = funder.options[funder.selectedIndex].value;

            var implementer = document.getElementById('id_activity_input_implementer');
            implementer.disabled = true;
            implementer.value = implementer.options[implementer.selectedIndex].value;

            var budget_currency = document.getElementById('id_activity_input_budget_currency');
            budget_currency.disabled = true;
            budget_currency.value = budget_currency.options[budget_currency.selectedIndex].value;

            var formData = document.getElementById('activity_input_expenditure_form');
            formData.addEventListener('submit', function() {
            var input_class = document.getElementById('id_activity_input_class');
            input_class.disabled = false;
            //input_class.value = input_class.options[input_class.selectedIndex].value;

            var input_sub_class = document.getElementById('id_activity_input_sub_class');
            input_sub_class.disabled = false;
           // input_sub_class.value = input_sub_class.options[input_sub_class.selectedIndex].value;

            var input_scheme = document.getElementById('id_activity_input_scheme');
            input_scheme.disabled = false;
            //input_scheme.value = input_scheme.options[input_scheme.selectedIndex].value;

            var input_sub_scheme = document.getElementById('id_activity_input_sub_scheme');
            input_sub_scheme.disabled = false;
            //input_sub_scheme.value = input_sub_scheme.options[input_sub_scheme.selectedIndex].value;

            var input_transfer_class = document.getElementById('id_activity_input_transfer_class');
            input_transfer_class.disabled = false;
            //input_transfer_class.value = input_transfer_class.options[input_transfer_class.selectedIndex].value;

            var input_transfer_sub_class = document.getElementById('id_activity_input_transfer_sub_class');
            input_transfer_sub_class.disabled = false;
            //input_transfer_sub_class.value = input_transfer_sub_class.options[input_transfer_sub_class.selectedIndex].value;

            var funder = document.getElementById('id_activity_input_funder');
            funder.disabled = false;
            //funder.value = funder.options[funder.selectedIndex].value;

            var implementer = document.getElementById('id_activity_input_implementer');
            implementer.disabled = false;
            //implementer.value = implementer.options[implementer.selectedIndex].value;

            var budget_currency = document.getElementById('id_activity_input_budget_currency');
            budget_currency.disabled = false;
           // budget_currency.value = budget_currency.options[budget_currency.selectedIndex].value;
        })
    })

            
</script>
{% endblock %}